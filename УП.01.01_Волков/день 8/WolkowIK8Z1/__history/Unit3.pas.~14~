unit Unit3;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ExtCtrls;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Button2: TButton;
    RadioGroup1: TRadioGroup;
    Edit1: TEdit;
    Edit2: TEdit;
    Button3: TButton;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure Button3Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

Type
  TTEST = Record
    TEXT: String[250]; // Текст вопроса
    OTV: Array [1 .. 4] of String[40]; // Варианты ответов
    REZ: Array [1 .. 4] of Byte // Правильный ответ
    end;

  Var
    ffile : textfile;
    fileName : string;
    SFILE: TextFile; // Справочник тестов
    FF_R: File of TTEST; // Рабочий файл тестов
    KOL: Byte; // Количество тестов в справочнике
    TEST_: TTEST; // Строка записи файл

  var
    Form1: TForm1;

implementation

{$R *.dfm}

uses Unit4,ShellAPI;

procedure TForm1.Button1Click(Sender: TObject);
begin

  if (Edit1.Text = '') or (Edit2.Text = '') or (RadioGroup1.ItemIndex = -1) then
  begin
    MessageDlg('Необходимо заполнить пустые поля и выбрать тему!', mtInformation, [mbYes], 0);
  end
  else
  begin
    fileName := 'TEST_' + IntToStr(RadioGroup1.ItemIndex) + '.txt';

    Form4.Show();
    Form1.Hide();
  end;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
Close;
end;

procedure TForm1.Button3Click(Sender: TObject);
begin
ShellExecute(Handle,'open','D:\Практика\ПрактикаУП01.01\День8\Win32\Debug\Kozeev_IK8_Zd1.exe', nil, nil, SW_SHOWNORMAL);
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  counter,i : integer;
  line : string;
  T_TEXT: Array [1 .. 10] of String[50];
  Left_N: Integer; // отступ слева
  Top_N: Integer; // отступ справа
begin

  counter := 0;

  while(FileExists('TEST_' + IntToStr(counter) + '.txt')) do
  begin
    AssignFile(ffile, 'TEST_' + IntToStr(counter) + '.txt');
    Reset(ffile);

    readln(ffile, line);

    RadioGroup1.Items.Add(line);
    Inc(counter);
  end;

  closefile(ffile);
    Left_N := 30;
    Top_N := 50;
    Form1.Caption := 'Тестирование';
    Form1.Width := 400;
    Form1.Height := Top_N + KOL * 25 + 120;
    RadioGroup1.Top := Top_N;
    RadioGroup1.Left := Left_N;
    RadioGroup1.Width := 350;
    RadioGroup1.Height := KOL * 25;
    RadioGroup1.Caption := ' Выбери тест ';
    For I := 1 to KOL - 1 do
      RadioGroup1.Items.Add(T_TEXT[I]);
    RadioGroup1.Font.Size := 11;
    Button1.Caption := 'Тест';
    Button1.Left := Left_N;
    Button1.Top := Top_N + KOL * 25 + 40;
    Button1.Width := 100;
    Button1.Height := 30;
    Button2.Caption := 'Выход';
    Button2.Left := Left_N + 250;
    Button2.Top := Top_N + KOL * 25 + 40;
    Button2.Width := 100;
    Button2.Height := 30;
  end;

end.
